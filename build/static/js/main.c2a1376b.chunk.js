(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),u=t.n(c),o=t(2),l=t(3),i=t.n(l),m="/api/persons",s=function(){return i.a.get(m).then((function(e){return e.data}))},f=function(e){return i.a.post(m,e).then((function(e){return e.data}))},d=function(e,n){return i.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return i.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},b=function(e){var n=e.person,t=e.confirmDelete;return r.a.createElement("li",null,n.name," ",n.number," ",r.a.createElement("button",{value:n.id,onClick:t},"Delete"))},p=function(e){var n=e.persons,t=e.confirmDelete;return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement(b,{key:e.id,person:e,confirmDelete:t})})))},v=function(e){var n=e.text,t=e.value,a=e.onChange;return r.a.createElement("div",null,n,": ",r.a.createElement("input",{value:t,onChange:a}))},E=function(e){var n=e.addPerson,t=e.newName,a=e.handleNameChange,c=e.newNumber,u=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement(v,{text:"Name",value:t,onChange:a}),r.a.createElement(v,{text:"Number",value:c,onChange:u}),r.a.createElement("button",{type:"submit"},"Add"))},g=function(e){var n=e.message,t=e.type;return null===n?null:r.a.createElement("div",{className:"alert ".concat(t)},n)},w=function(){Object(a.useEffect)((function(){s().then((function(e){c(e)})).catch((function(e){x("Error fetching persons from database!"),L("error"),setTimeout((function(){x(null),L("")}),5e3)}))}),[]);var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),l=Object(o.a)(u,2),i=l[0],m=l[1],b=Object(a.useState)(""),w=Object(o.a)(b,2),j=w[0],O=w[1],C=Object(a.useState)(""),N=Object(o.a)(C,2),y=N[0],S=N[1],k=Object(a.useState)(null),D=Object(o.a)(k,2),T=D[0],x=D[1],P=Object(a.useState)(""),A=Object(o.a)(P,2),J=A[0],L=A[1],B=""===y?t:t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())||e.number.includes(y)}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:T,type:J}),r.a.createElement(v,{text:"Search",value:y,onChange:function(e){S(e.target.value)}}),r.a.createElement("h3",null,"Add a new contact"),r.a.createElement(E,{addPerson:function(e){e.preventDefault();var n={name:i,number:j};if(t.some((function(e){return e.name===i}))){if(t.some((function(e){return e.name===i&&e.number===j})))alert("".concat(i," is already added to the phonebook with the given number."));else if(window.confirm("".concat(i," is already added to the phonebook. Replace the old number with a new one?"))){var a=t.find((function(e){return e.name===i})).id;d(a,n).then((function(e){c(t.map((function(n){return n.id!==a?n:e}))),m(""),O(""),x("Updated ".concat(i)),L("success"),setTimeout((function(){x(null),L("")}),5e3)})).catch((function(e){x("Error updating ".concat(i,"!")),L("error"),setTimeout((function(){x(null),L("")}),5e3)}))}}else f(n).then((function(e){c(t.concat(e)),m(""),O(""),x("Added ".concat(i)),L("success"),setTimeout((function(){x(null),L("")}),5e3)})).catch((function(e){x("Error adding ".concat(i," to database!")),L("error"),setTimeout((function(){x(null),L("")}),5e3)}))},newName:i,handleNameChange:function(e){m(e.target.value)},newNumber:j,handleNumberChange:function(e){O(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(p,{persons:B,confirmDelete:function(e){var n=e.target.value,a=t.find((function(e){return e.id===n})).name;window.confirm("Delete ".concat(a,"?"))&&function(e,n){h(e).then((function(){c(t.filter((function(n){return n.id!==e}))),x("".concat(n," deleted successfully")),L("success"),setTimeout((function(){x(null),L("")}),5e3)})).catch((function(e){x("Person ".concat(n," was already removed from server!")),L("error"),setTimeout((function(){x(null),L("")}),5e3)}))}(n,a)}}))};t(36);u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.c2a1376b.chunk.js.map